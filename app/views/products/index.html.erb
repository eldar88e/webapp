<% content_for :title, 'Каталог' %>
<% if @products&.first&.image&.attached? %>
  <%= content_for :head, preload_link_tag(storage_path(@products.first.image), as: 'image',
                                          type: @products.first.image.blob.content_type) %>
<% end %>

<h1><%= yield(:title) %></h1>

<nav>
  <ul class="catalog-nav">
    <% available_categories.each do |category| %>
      <li>
        <%= link_to category.name, products_path(category_id: category.id),
                    title: "Перейти к #{category.name}", data: { turbo_prefetch: false } %>
      </li>
    <% end %>
  </ul>
</nav>

<div id="products" class="flex flex-wrap -mx-2">
  <%= render @products %>
</div>

<%= render '/products/pagination' %>
